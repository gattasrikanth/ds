<title>Frequency Queries</title>

<body>
    <script>
        function init() {
            console.clear();
                nStacks();
        }

    let capacity = 10;
    let n = 3;
    let tos = new Array(n);
    tos.fill(-1);

    let stackData = new Array(capacity);
    stackData.fill(0);
    let nextIndex = new Array(capacity);
    for (let i = 0; i < capacity; i++) {
        if (i == capacity -1)
            nextIndex[i] = -1;
        else nextIndex[i] = i+1;
    }
    let nextAvailable = 0;
console.log(tos);
console.log(stackData);
console.log(nextIndex);

function push(stack, value) {

    let previousIndex = tos[stack];
    let currentIndex = nextAvailable;
    nextAvailable = nextIndex[currentIndex];
    stackData[currentIndex] = value;
    nextIndex[currentIndex] = previousIndex;
    tos[stack] = currentIndex;    

console.log(tos);
console.log(stackData);
console.log(nextIndex);
}

function pop(stack) {
    let currentIndex = tos[stack];
    let value = stackData[currentIndex];
    tos[stack] = nextIndex[currentIndex];
    nextIndex[currentIndex] = nextAvailable;
    nextAvailable = currentIndex;
    console.log("Popped: ", value);
    console.log(tos);
console.log(stackData);
console.log(nextIndex);

} 

function stackpush() {
    let stack = document.getElementById('stack').value;
    let value = document.getElementById('push').value;
    if (value === '')
        value = Math.floor(Math.random() * 10);
    push(parseInt(stack), parseInt(value));
}
function stackpop() {
    let value = document.getElementById('pop').value;
    pop(parseInt(value));
}

</script>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <h3>Frequency Queries</h3>
    Stack<input type='number' id='stack' value='0'></input> 
    Push<input type="number" id="push" value=''/> <input type="button" onclick="stackpush()" value="Push">    
    <br>
    Pop<input type="number" id="pop" value='1'/><input type="button" onclick="stackpop()" value='Pop'>
    <button onclick="init()">NStacks</button>
</body>